Kit.define("account",{identity:null,avatar:null,username:null,profile:null,first_name:null,last_name:null,name:null,async initial(){this.keyStore="account";try{var data=this.getStorage();if(data){this.setInfomation(data);return}data=await this.fetchInformation(),data&&(sessionStorage.setItem(this.keyStore,JSON.stringify(data)),this.setInfomation(data));return}catch(e){return console.log(e),null}},getStorage(){let dataStorage=sessionStorage.getItem(this.keyStore);if(dataStorage)try{return JSON.parse(dataStorage)}catch{return sessionStorage.removeItem(this.keyStore),null}},async fetchInformation(){try{const response=await fetch("/api/account/information"),{success,data}=await response.json();return success&&data?data:null}catch{return null}},setInfomation(info){Object.assign(this,info)},async logout(){sessionStorage.removeItem(this.keyStore),this.setInfomation({identity:null,avatar:null,username:null,profile:null,first_name:null,last_name:null});try{const response=await fetch("/api/logout",{method:"POST"}),result=await response.json();if(result.success)return;console.warn("Logout failed:",result.message||result)}catch(error){console.error("Logout error:",error)}}})