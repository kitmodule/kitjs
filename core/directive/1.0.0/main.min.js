(function(global){const kitmodule=global.kitmodule||(global.kitmodule={});function kitDirective(component){return{show(el,expr){component.$effect(()=>{el.hidden=!component._evaluator(expr)})},class(el,expression){component.$effect(()=>{const exprs=component._parseExpr(expression);if(!exprs)return;if(typeof exprs=="string"){const add=component._evaluator(exprs);add&&el.classList.add(add);const remove=component._evaluator(reverseTernary(exprs));remove&&el.classList.remove(remove);return}if(typeof exprs=="object")for(const[cls,cond]of Object.entries(exprs))el.classList.toggle(cls,!!component._evaluator(cond))})},style(el,expression){component.$effect(()=>{const exprs=component._parseExpr(expression);if(!exprs||typeof exprs!="object")return;for(const[prop,val]of Object.entries(exprs))el.style[prop]=component._evaluator(val)})},bind(el,expression){component.$effect(()=>{const exprs=component._parseExpr(expression);if(!exprs)return;if(typeof exprs=="string"){const value=component._evaluator(exprs),tag=el.tagName.toLowerCase();switch(tag){case"input":case"textarea":case"select":["checkbox","radio"].includes(el.type)?el.checked=Boolean(value):el.value=value;break;case"img":el.src=value;break;case"a":el.href=value;break;default:el.textContent=value}return}if(typeof exprs=="object")for(const[prop,val]of Object.entries(exprs)){const result=component._evaluator(val);switch(prop){case"text":el.textContent=result??"";break;case"html":result?el.innerHTML=kitSanitizer(result):el.innerHTML="";break;default:result?el.setAttribute(prop,result):el.removeAttribute(prop);break}}})},model(el,expr){const exprs=component._parseExpr(expr);if(!exprs)return;if(typeof exprs=="string"){const tag=el.tagName.toLowerCase();switch(tag){case"input":case"textarea":case"select":console.log(),el.value=component.$state[exprs]??"",el.addEventListener("input",()=>{component.$state[exprs]=component._evaluator(el.value)});break}}component.$effect(()=>{if(typeof exprs=="string"){const val=component.$state[expr]??"";el.value!==val&&(el.value=val)}})}}}function reverseTernary(expr){const match=expr.match(/^(.*?)\?(.*?):(.*)$/);if(!match)return null;let[,condition,truthy,falsy]=match;return`!(${condition.trim()}) ? ${truthy.trim()} : ${falsy.trim()}`}kitmodule.directive=kitDirective})(typeof window!="undefined"?window:globalThis)